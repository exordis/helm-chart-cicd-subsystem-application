---
order: 1
---

## Description

Entire helm chart deploys application, sacrificing some flexibility for simplicity and unification. 

Application is standalone software unit that implement specific functionality within a Subsystem. Samples of application are - micro-service, web application.

## Values

### Metadata

``` yaml
--8<-- "snippets/values/metadata.yaml"
```


Metadata values except `product` are used to build resource names with [Naming Conventions](naming conventions.md) and available in application pods as environment variables. Thus to adhere kubernetes naming constraints validated with regex `^[a-z]([-a-z0-9]*[a-z0-9])?$`

`product` is used only as reference value and represents mapping of subsystem as technical asset on organization business unit or marketing naming.

`product` value is not available for resource naming to avoid massive kubernetes resources renaming in case of `subsystem` handover from one business unit to another or marketing naming change.

!!! NOTE
    Kubernetes has 64 characters limit for resource names, so metadata values should be as short as possible to avoid exceeding this limit, though yet not loosing clear identification.


#### Global Metadata Values

Following values are defined within global section as they belong to subsystem context. If application helm chart is deployed as part of subsystem, the values should be provided with subsystem helm chart and be the same for all `subsystem` applications:


`subsystem` 

:   name of the `subsystem` owning the application. 

    **Mandatory** 

`product` 

:   name of product owning the `subsystem`.

    **Mandatory** 


`environment` 

:   environment application is being deployed to. 

    **Mandatory** 

#### Application Specific Metadata Values:

`version`

:    version of the application. Appears as value of `app.kubernetes.io/version` label of all manifests generated by the chart and used as default docker  images version

    All [containers](Components/containers.md) defined in values are using root `version`, `registry`, `repository` as default values of `image` fields.


    **Mandatory** 

`application`

:   application name

    **Mandatory** 

`applicationType`

:   type of the application:
      -  `service` - microservice
      -  `web` - web application
    
    **Default:** `service`

`instance`

:   name of the instance of the application. E.g. subsystem may deploy multiple application instances in sharding scenarios. If there is only one instance this field is ok to be omitted.

    **Default:** null


### Docker Default Values   


``` yaml
--8<-- "snippets/values/docker-defaults.yaml"
```

`registry` 

:   Default registry to pull  application docker images from. 

    **Default:** `docker.io`


`repository`

:   Default repository (image name)

    **Default:** application canonical name `[Values.global.subsystem]-[Values.global.application]` (format may be changed with [Naming Conventions](naming conventions.md) ). 


### Envs config map

`envs` configMap is always generated. It defines environment variables to be available in all containers of application.

#### Definition in values
```
envs:
  VARIABLE: value
```

#### Metadata environment variables

Metadata variables are added to `envs` config map. If `envs` is missing from values, config map contains only metadata:

  - `EXORDIS_PRODUCT` - subsystem product
  - `EXORDIS_SUBSYSTEM` - subsystem name
  - `EXORDIS_APPLICATION` - application canonical name as `[Values.global.subsystem]-[Values.global.application]`
  - `EXORDIS_INSTANCE` - instance name
  - `EXORDIS_ENVIRONMENT` - environment


### Workload

``` yaml
--8<-- "snippets/values/workload.yaml"
```

As application is intended to be microservice or web application there can not be more than one workload deployed. (If more is needed, likely each workload has to be deployed independently in scope of same `subsystem` or  entire helm-chart is not applicable for the use case )  

Application workload is configured with `workload`:

`enabled`

:   Indicates whether to deploy application workload. 
    
    `false` is degenerate case but may be useful in some cases e.g. if Resources deployed by the chart have independent lifecycle within `subsystem`

    **default:** `true`

`kind`

:   workload kind. Only [Deployment](Workloads/deployment.md) is supported at the moment

    **default:** `Deployment`

`replicas` 

:   number of pod replicas of workload.

    **default:** 3

`clusterRole`

:   Workload cluster role. If value contains `id` of [Cluster Role](Resources/cluster-role.md) defined in `.Values.workload.clusterRoles` it is expanded to full name, otherwise value considered as pre-created Cluster Role and kept as is. If `clusterRole` is defined, ServiceAccount and binding to this role is created for application workload

    **default:** null (no explicit cluster role to be assigned)


!!! NOTE
    Support of `StatefulSet` workload kind to be added later





### Entities

The remaining part of values is definition of entities that are translated to kubernetes manifests. 

Entities are of following types



#### Resources

Standalone resources to be deployed.

- [configmap](Resources/configmap.md)
- [secret](Resources/secret.md)
- [external-secret](Resources/external-secret.md)
- [ingress](Resources/ingress.md)
- [PVC](Resources/pvc.md)
- [service](Resources/service.md)

#### Workload components

Components of workloads. 

Application workload components are to be defined on root level of values. If `workload` value is set to `none`, such components are ignored. This ensures that application workload is only one and lets change type of application workload without significant changes in `values`

Batch workload components are to be defined as part of corresponding workload. 

- [components](Components/containers.md)
- [volumes](Components/volumes.md)

#### Workloads


##### Application Workloads 

Tuning of workload based on its type.

- [Deployment](Workloads/deployment.md)


##### Batch Workloads

Batch workloads to be deployed.

- [CronJob](Batch Workloads/cronjob.md)


### Real world samples

#### It Tools

Deployment of [it tools](https://github.com/CorentinTh/it-tools) - set of IT tools like IPv4 address converter and Base64 string encoder/decoder.

``` yaml
--8<-- "snippets/samples/it-tools.yaml"
```

#### Homepage

Deployment of [Homepage](https://gethomepage.dev/) dashboard


``` yaml
--8<-- "snippets/samples/homepage.yaml"
```